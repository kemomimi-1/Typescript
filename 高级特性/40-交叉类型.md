# 交叉类型（Intersection Types）

## 概念定义

**交叉类型** 是将多个类型合并为一个类型，新类型包含所有类型的成员。使用 `&` 运算符将多个类型组合在一起。

## 语法示例

### 基本用法
```typescript
interface Person {
  name: string;
  age: number;
}

interface Employee {
  employeeId: string;
  department: string;
}

// 交叉类型：同时具有 Person 和 Employee 的所有属性
type EmployeePerson = Person & Employee;

const john: EmployeePerson = {
  name: "John Doe",
  age: 30,
  employeeId: "E123",
  department: "Engineering"
};
```

### 与联合类型结合
```typescript
type StringOrNumber = string | number;
type NumericArray = number[];

type Combined = StringOrNumber & NumericArray; // never - 没有共同类型
```

### 函数类型交叉
```typescript
type Loggable = {
  log: (message: string) => void;
};

type Savable = {
  save: () => Promise<void>;
};

type LoggerSaver = Loggable & Savable;

const app: LoggerSaver = {
  log: (msg) => console.log(msg),
  save: async () => { /* 保存逻辑 */ }
};
```

## 使用场景说明

1. **组合接口**：将多个接口的属性合并到一个类型中
2. **混入模式**：为对象添加额外的功能或属性
3. **配置合并**：合并多个配置对象的类型
4. **插件系统**：为基础类型添加插件特定的属性和方法
5. **类型扩展**：在不修改原始类型的情况下扩展类型定义

## 注意事项

1. **属性冲突**：如果交叉的类型有同名但类型不兼容的属性，结果类型为 `never`
2. **方法合并**：同名方法会被合并，但需要手动处理重载
3. **可选属性**：交叉类型中的可选属性保持可选
4. **只读属性**：交叉类型会保持属性的只读特性
5. **类型推断**：交叉类型可能使类型推断变得复杂

## 相关代码示例

参见：[examples/40-intersection-types.ts](../examples/40-intersection-types.ts)

## 与接口继承的比较

| 特性 | 交叉类型 | 接口继承 |
|------|---------|---------|
| 语法 | `TypeA & TypeB` | `interface C extends A, B` |
| 同名属性 | 必须类型兼容 | 可以重写或扩展 |
| 灵活性 | 更高，可以组合任意类型 | 只能继承接口和类 |
| 可读性 | 相对较低 | 相对较高 |
| 声明合并 | 不支持 | 支持 |

---

**最后更新时间**：2025-11-21  
**相关主题**：[接口](../类型系统/15-接口.md) | [联合类型](../类型系统/08-联合类型.md) | [类型别名](../类型系统/09-类型别名.md)