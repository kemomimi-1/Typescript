# 索引签名类型

索引签名是 TypeScript 中一种定义对象动态属性的方式，允许对象有任意数量的属性，只要键和值符合指定的类型。这特别适用于字典、配置对象或从外部数据源加载的数据，其中属性名在编译时未知。

## 为什么使用索引签名？
- **动态键**：处理运行时生成的键。
- **类型安全**：确保所有动态属性的值符合类型。
- **灵活性**：可以与固定属性结合。

## 基本示例：字符串键字典
```typescript
interface StringDictionary {
  [key: string]: string; // 索引签名：键为 string，值为 string
}

const dict: StringDictionary = {
  name: 'Alice',
  city: 'Wonderland'
};
dict['country'] = 'Fantasy'; // 有效
// dict['age'] = 30; // 错误：number 不符合 string 类型

console.log(dict['name']); // 'Alice'
```

## 数字键索引签名
键可以是 number，常用于数组-like 对象。

```typescript
interface NumberArray {
  [index: number]: string;
}

const arr: NumberArray = ['a', 'b', 'c'];
console.log(arr[1]); // 'b'
// arr[1] = 123; // 错误：number 不符合 string
```

## 与固定属性结合
索引签名可以与显式属性共存，但固定属性的类型必须兼容索引签名。

```typescript
interface Person {
  name: string; // 固定属性
  [key: string]: string | number; // 索引签名允许 string 或 number 值
}

const person: Person = {
  name: 'Alice',
  age: 30, // 符合索引签名
  city: 'Wonderland'
};
// person['height'] = true; // 错误：boolean 不符合 string | number
```

## 只读索引签名
使用 readonly 防止修改。

```typescript
interface ReadonlyDict {
  readonly [key: string]: string;
}

const constants: ReadonlyDict = { pi: '3.14' };
// constants['pi'] = '3.14159'; // 错误：readonly
```

## 注意事项
- **键类型限制**：只能是 string、number、symbol 或模板字面量类型。
- **兼容性**：固定属性的类型必须是索引签名值类型的子类型。
- **潜在问题**：过度使用可能导致类型松散；优先使用 Map 如果键值对复杂。
- **与映射类型结合**：可以动态生成索引签名。
- **常见错误**：在索引签名中忘记处理 undefined（访问不存在键返回 undefined）。
- **性能**：在大型对象中，索引签名不会影响运行时，但类型检查可能稍慢。

索引签名是处理动态数据的强大工具。如果您有特定场景的示例需求，我可以进一步扩展！