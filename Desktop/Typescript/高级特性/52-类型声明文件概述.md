# 类型声明文件概述

类型声明文件（以 .d.ts 结尾）是 TypeScript 中用于为 JavaScript 代码提供类型信息的特殊文件。它们不包含任何实现代码，只定义类型、接口和模块结构。这使得 TypeScript 可以为纯 JS 库或模块提供类型检查和智能提示，而无需修改原代码。

## 为什么需要类型声明文件？
- **类型安全**：为无类型的 JS 代码添加类型，防止错误。
- **IDE 支持**：启用自动补全、导航和重构。
- **模块化**：声明外部模块的导出，便于导入。
- **社区贡献**：DefinitelyTyped 项目提供数千个库的声明文件。

## 基本结构
一个简单的 .d.ts 文件示例：

```typescript
// my-module.d.ts
declare module 'my-module' {
  export interface Config {
    apiKey: string;
  }

  export function init(config: Config): void;
  export function greet(name: string): string;
}
```

使用时：
```typescript
import { greet } from 'my-module';
const message = greet('Alice'); // string 类型，带提示
```

## 声明全局变量和函数
不使用 module，用于全局脚本。

```typescript
// globals.d.ts
declare const MY_GLOBAL: string;

declare function myGlobalFunction(): void;
```

## 声明命名空间
用于组织相关类型。

```typescript
declare namespace MyNamespace {
  export interface Item {
    id: number;
  }
  export function createItem(): Item;
}
```

## 高级特性：环境声明
声明文件可以包括 triple-slash 指令。

```typescript
/// <reference path="other.d.ts" />
declare module 'module' { ... }
```

## 注意事项
- **安装**：通过 npm 安装，如 `@types/node`。
- **自动生成**：tsc 可以生成 .d.ts 文件（使用 --declaration）。
- **潜在问题**：声明文件必须与 JS 实现匹配，否则运行时错误。
- **版本兼容**：确保声明文件版本与库版本一致。
- **自定义声明**：如果库没有官方声明，可以手动创建并放置在项目中。
- **性能**：大型声明文件可能增加编译时间，但通常值得。
- **常见错误**：忘记 export 导致类型不可见，或路径错误导致未找到。

类型声明文件是桥接 JS 和 TS 的关键。如果您需要为特定库创建声明文件的帮助，请提供细节！